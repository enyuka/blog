# Twilio Flexを再度学習したまとめ

こんにちは、[@24guchia](https://twitter.com/24guchia)です。
題名の通り、Twilio Flexについて再度学習したので、
学びなどのまとめです。

## なんで再度学習をしたか？

Twilio Flexを実務でできる人が少ない(観測範囲内)からです。
今、多分こんな感じです。

`Twilio Flexでコンタクトセンター立ち上げたい会社 >>> Twilioできる人 >>>>>>> Twilio Flexできる人（いるのか？）`

僕はTwilioチョットデキルと思うのですが、
Flexは本当によくわかってないので、
市場価値を上げるために学習をしました。
1ヶ月ニートしてるのも、Flexの勉強するためと言っても過言ではない。

## Flexについて改めて

以前、こんな記事を書きました。
http://harinoma.info/?p=80

書いている内容のサマリーとしては下記です。
* CPaaSという概念の提唱がよい
* コンタクトセンターのUIのパッケージング
* Twilioのビジョンを体現したプロダクト

改めて読み直しても、今と変わらず、
だいたい言いたいことはこの記事に書いてある通りです。
ただ、これはコンセプトに関してしか書いてない。

コンセプトの理解はリリースから1年以上経ったため、
おそらく導入検討している人は理解していると思うので、
改めて書き直すことはないです。

## Flexチュートリアルをやってみた

技術的な話をまとめましたが、
長くなったので別記事に分けました。
エンジニア、特にフロントエンド寄りのデザイナーに
読んでいただきたい内容になっています。
TODO　URL貼る

技術者以外の方でもとりあえず概要だけでも・・・
と言った方向けに概要をまとめました。
* Flexとは何か？
* Flexチュートリアルをやる
  * SMS・チャットのボット設定
  * IVRの設定
  * 受電ルーティング(ACD)
* Reactを使って、Flexの機能改修について
  * CRMの連携
  * ローカル開発と本番環境へのデプロイ
  * ReactコンポーネントとFlexの連携

## Flexチュートリアルやったけど、Flexの話が少なすぎない？

お気づきになりましたか。

最初にも書きましたが、
FlexはいままでのTwilioのプロダクトをパッケージにして、
**UIをReactでかっこよくしているフレームワーク**でしかありません。

そのため、かんたんにコンタクトセンターを立ち上げることはできますが、
その後の運用で何をどうするかや、
各プロダクトの使い方は学ぶ必要があります。

### Flexで利用されているTwilioプロダクト

各プロダクトって具体的になんですか？っていう方向けに、
一旦Flexで利用されているTwilioプロダクトを
分かる範囲で箇条書きしました。

* Flex(React)
* Voice
* Conference
* SMS
* Chat
* Sync
* TaskRouter
* Studio
* Assets

これら技術に立脚したプロダクトがFlexです。

FlexのフロントエンドはReactなので、
Reactについても知っておく必要があるでしょう。
さらにTwilioはWebRTCを利用しているので、
WebRTCでのデバッグや各ブラウザでの挙動確認が必要で、
コンタクトセンターを効率的に運用するノウハウも必要です。
これらを一人で押さえるのは無理なので、
ぜひチームで取り組んでください。

Flexが立ち上がって、それっぽく動いたからと言って、
やった！これで勝つる！！
って言ってすぐ導入しないでくださいね。

Flexがない状態で、上記Twilioプロダクトを使い倒して[コンタクトセンターを立ち上げた身](https://twilio.kddi-web.com/case/leverages2018/)としては、
これでもかなり楽になったと断言できます。

## Flex導入のメリット

### モダンなコンタクトセンターのデザインがすでに作られている

Flexのデモ画像をご覧ください。
TODO 画像貼る

これは初期設定のまま、インストールしたFlexです。
かなりモダンだと感じられると思います。

コンタクトセンターについて知らないチームが
これと同レベルのデザインを作るとなった場合、
そもそもコンタクトセンターにはどんな機能があるかを調べ、
デザインしていく必要があります。
そのようなフェーズを経ずに、
一般的なコンタクトセンターの機能をまるごと包括し、
デザインが済んでいるのはメリットです。

### モダンなコンタクトセンターの機能を知ることができる

Flexは覚えることは多いですが、
コンタクトセンターの機能がまとまっているので、
何を知り、仕様をどう落とし込むべきかを
考えるいい材料になります。

1からコンタクトセンターについて学ぶ必要がないのは、
本当に楽だと思います。
Flex自体がコンタクトセンターに関するベースの
知識になるので、Flex自体を導入するしないに関わらず、
Twilio自体の導入前に一度、触ってみることをおすすめします。

### 優秀な人材がすぐにコンタクトセンターを使えるようになる

これはFlexがデファクトスタンダードになったときの話ですが、
Flexが津々浦々の企業で導入されるとします。
そうなった際に、Flexのコンタクトセンターで成績を上げた
優秀な人材が入社してきた際、
教育にかかる期間が大幅に短縮されます。
電話やチャットの機能はすべての企業のFlexでほぼ同機能になるため、
改めて教育し直す必要がなくなり、
その企業独自のビジネスドメインについてだけ、
教育すれば良くなるので、キャッチアップがすばやくなります。

## Flex課題に感じるところ

チュートリアルやっただけですが、
僕が課題として感じた点をまとめました。

### Twilioアカウントがあっても、別プロジェクト扱い

別プロジェクトだと、すでにアカウント開設して持っている電話番号や
Twilioポイントが新規作成するFlexプロジェクトで使えない点が困りそう。
特に既存のTwilioプロジェクト持っている会社が、
Flexに乗り換えようと思っても、移行がしづらいのでは？
相談すると、この辺は対応してくれるのかな？

### SMSの入力欄で日本語入力ができない

`こんにちは`と入力しようとすると、
下記画像のようになりました。
入力途中で勝手に確定してしまうため、日本での導入は難しそうですね。

TODO 画像貼る

ちなみにコピペしたら、送ることはできました。
そのため、これはFlexのUIのバグでしょうね。

TODO 画像貼る

Chromeの開発者ツールで見たところ、
入力イベント（KeydownかKeyupあたりか？）に
何かしらのイベントがバインディングされており、
キー入力するたびにtextareaにvalueを設定するような挙動をしているため、
入力中に入力値が確定されるようです。
なぜこのような挙動なのか・・・

### Studioダイアログの整列機能がほしい

画像をご覧ください。

TODO 画像貼る

矢印がきれいな一直線にならないのがめっちゃ気になるｗ
整列機能がほしいですね。

### Studioの操作がTwilio内でしかできない

Flexの記事かと思いきや、ほとんどStudioの話で終始していました。
Flexにおいて、Studioは重要な位置にあります。

そんなStudioのいいところはGUIで
誰でも(特に非エンジニアを指す)簡単に操作ができることだと思っていますが、
Studioを編集するために、Twilio管理画面にログインする必要があります。
しかし、Twilio管理画面は
電話番号を買うのはもちろん、**保有している電話番号をリリースしたり**、
**Studioのフローを消したり**など、
かなりクリティカルな操作が可能です。
悪意を持って操作する人はいないと信じたいですが、
うっかり電話番号を**リリースしちゃいました！**や、
うっかりFlexで使ってる**Studioのフローを壊しちゃいました！**
みたいなことは起こり得ないとはいえません。

そのため、結局はTwilioとコンタクトセンターのリテラシーが
高くないとStudioの操作を一任するということは難しく、
エンジニアの負荷を軽減するにはまだまだ発展途上という認識です。
Studioだけ操作可能な権限設定を可能にしたり、
差分をGitHubのようにレビュー後、
Publishできるような仕組みがあるなどすれば、
もう少し安心できますね。

## まとめ

Flexについて一通り学びました。
現時点ですぐに普及するかはなんとも言えませんが、
完成度高くまとまっていると感じています。

導入検討にあたり、Flexの癖や何かしら問題など起きると思うので、
それらとどう付き合っていくか、
どこまでリスクを取って、どこまでFlexの将来性を信じるか、
複合的な視点で検討を行いましょう。